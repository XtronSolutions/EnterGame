
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/PlayerProfileManager.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5bf9bM1le5IzIRIaU5nMgXr', 'PlayerProfileManager');
// Script/PlayerProfileManager.js

"use strict";

var businessDetailNodes = [];
var PlayerInfoUI = cc.Class({
  name: "PlayerInfoUI",
  properties: {
    PlayerName: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player name label of info player UI"
    },
    PlayerCash: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player cash label of info player UI"
    },
    PlayerMarketingAmount: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player marketing amount label of info player UI"
    },
    LawyerLabel: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player lawyer status label of info player UI"
    },
    GoldBalanceLabel: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player gold balance label of info player UI"
    },
    StockBalanceLabel: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player stock balance label of info player UI"
    },
    PartnershipStatusLabel: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player partnership status label of info player UI"
    },
    BusinessNumberLabel: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player business number label of info player UI"
    },
    BusinessDetailContent: {
      "default": null,
      type: cc.Node,
      serializable: true,
      toolTip: "Reference of the content of scroll view of business detail node of info player UI"
    },
    BusinessDetailPrefab: {
      "default": null,
      type: cc.Prefab,
      serializable: true,
      toolTip: "Reference of the business detail prefab of info player UI"
    }
  }
});
var GamePlayReferenceManager = null;

var GameManager = require('GameManager');

var PlayerProfileManager = cc.Class({
  name: "PlayerProfileManager",
  "extends": cc.Component,
  properties: {
    BGHighlight: {
      "default": null,
      type: cc.Node,
      serializable: true,
      toolTip: "Reference of the node of player's BG highlight Node"
    },
    PlayerAvatarSprite: {
      "default": null,
      type: cc.Sprite,
      serializable: true,
      toolTip: "Reference of the sprite of player's avatar"
    },
    PlayerNameLabel: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the label of player's name"
    },
    PlayerTurnHighlighterNode: {
      "default": null,
      type: cc.Node,
      serializable: true,
      toolTip: "Reference of the node of player's highlighter"
    },
    AvatarSpriteFrames: {
      "default": [],
      type: [cc.SpriteFrame],
      serializable: true,
      toolTip: "Reference of the array of sprites of player's avatar"
    },
    PlayerIndex: {
      "default": -1,
      type: cc.integer,
      serializable: true
    },
    PlayerInfoScreen: {
      "default": null,
      type: cc.Node,
      serializable: true
    },
    PlayerInfoMainUI: {
      "default": null,
      type: PlayerInfoUI,
      serializable: true,
      tooltip: "all player's UI data"
    },
    DiceRollScreen: {
      "default": null,
      type: cc.Node,
      serializable: true
    },
    PlayerInfo: {
      "default": null,
      type: GameManager.PlayerData,
      serializable: true,
      tooltip: "all player's data"
    }
  },
  onLoad: function onLoad() {
    this.CheckReferences();
  },
  //
  start: function start() {},
  CheckReferences: function CheckReferences() {
    if (!GamePlayReferenceManager || GamePlayReferenceManager == null) GamePlayReferenceManager = require('GamePlayReferenceManager');
  },
  SetName: function SetName(_name) {
    this.PlayerNameLabel.string = _name;
  },
  SetAvatar: function SetAvatar(_index) {
    this.PlayerAvatarSprite.spriteFrame = this.AvatarSpriteFrames[_index];
  },
  ToggleBGHighlighter: function ToggleBGHighlighter(_state) {
    this.BGHighlight.active = _state;
  },
  ToggleTextighlighter: function ToggleTextighlighter(_state) {
    this.PlayerTurnHighlighterNode.active = _state;
  },
  SeeProfileData: function SeeProfileData() {
    if (GamePlayReferenceManager.Instance.Get_MultiplayerController().GetSelectedMode() == 2) {
      //only for real players
      GamePlayReferenceManager.Instance.Get_GameManager().SyncDataToPlayerGameInfo(0);
    }

    this.PlayerInfoScreen.active = true;
    this.CheckReferences();
    businessDetailNodes = [];
    var _tempData = GamePlayReferenceManager.Instance.Get_GameManager().PlayerGameInfo[this.PlayerIndex];
    this.PlayerInfoMainUI.PlayerName.string = _tempData.PlayerName;
    this.PlayerInfoMainUI.PlayerCash.string = _tempData.Cash;
    this.PlayerInfoMainUI.PlayerMarketingAmount.string = _tempData.MarketingAmount;
    if (_tempData.LawyerStatus) this.PlayerInfoMainUI.LawyerLabel.string = "YES";else this.PlayerInfoMainUI.LawyerLabel.string = "NO";
    this.PlayerInfoMainUI.PartnershipStatusLabel.string = "N/A";
    this.PlayerInfoMainUI.GoldBalanceLabel.string = _tempData.GoldCount;
    this.PlayerInfoMainUI.StockBalanceLabel.string = _tempData.StockCount; //this.PlayerInfoMainUI.StockBalanceLabel.string=_tempData.NoOfStocks.length;

    this.PlayerInfoMainUI.BusinessNumberLabel.string = "No of Businesses : " + _tempData.NoOfBusiness.length;

    for (var index = 0; index < _tempData.NoOfBusiness.length; index++) {
      var node = cc.instantiate(this.PlayerInfoMainUI.BusinessDetailPrefab);
      node.parent = this.PlayerInfoMainUI.BusinessDetailContent;
      node.getComponent('BusinessDetail').SetName(_tempData.NoOfBusiness[index].BusinessName);
      node.getComponent('BusinessDetail').SetType(_tempData.NoOfBusiness[index].BusinessTypeDescription);
      node.getComponent('BusinessDetail').SetType(_tempData.NoOfBusiness[index].BusinessTypeDescription);
      if (parseInt(_tempData.NoOfBusiness[index].BusinessType) == 1) node.getComponent('BusinessDetail').SetMode("Home Based");else if (parseInt(_tempData.NoOfBusiness[index].BusinessType) == 2) node.getComponent('BusinessDetail').SetMode("Brick & Mortar");
      node.getComponent('BusinessDetail').SetBalance(_tempData.NoOfBusiness[index].Amount);
      node.getComponent('BusinessDetail').SetLocations(_tempData.NoOfBusiness[index].LocationsName.length);
      businessDetailNodes.push(node);
    }
  },
  ExitProfileData: function ExitProfileData() {
    for (var index = 0; index < businessDetailNodes.length; index++) {
      businessDetailNodes[index].destroy();
    }

    businessDetailNodes = [];
    this.PlayerInfoScreen.active = false;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxQbGF5ZXJQcm9maWxlTWFuYWdlci5qcyJdLCJuYW1lcyI6WyJidXNpbmVzc0RldGFpbE5vZGVzIiwiUGxheWVySW5mb1VJIiwiY2MiLCJDbGFzcyIsIm5hbWUiLCJwcm9wZXJ0aWVzIiwiUGxheWVyTmFtZSIsInR5cGUiLCJMYWJlbCIsInNlcmlhbGl6YWJsZSIsInRvb2xUaXAiLCJQbGF5ZXJDYXNoIiwiUGxheWVyTWFya2V0aW5nQW1vdW50IiwiTGF3eWVyTGFiZWwiLCJHb2xkQmFsYW5jZUxhYmVsIiwiU3RvY2tCYWxhbmNlTGFiZWwiLCJQYXJ0bmVyc2hpcFN0YXR1c0xhYmVsIiwiQnVzaW5lc3NOdW1iZXJMYWJlbCIsIkJ1c2luZXNzRGV0YWlsQ29udGVudCIsIk5vZGUiLCJCdXNpbmVzc0RldGFpbFByZWZhYiIsIlByZWZhYiIsIkdhbWVQbGF5UmVmZXJlbmNlTWFuYWdlciIsIkdhbWVNYW5hZ2VyIiwicmVxdWlyZSIsIlBsYXllclByb2ZpbGVNYW5hZ2VyIiwiQ29tcG9uZW50IiwiQkdIaWdobGlnaHQiLCJQbGF5ZXJBdmF0YXJTcHJpdGUiLCJTcHJpdGUiLCJQbGF5ZXJOYW1lTGFiZWwiLCJQbGF5ZXJUdXJuSGlnaGxpZ2h0ZXJOb2RlIiwiQXZhdGFyU3ByaXRlRnJhbWVzIiwiU3ByaXRlRnJhbWUiLCJQbGF5ZXJJbmRleCIsImludGVnZXIiLCJQbGF5ZXJJbmZvU2NyZWVuIiwiUGxheWVySW5mb01haW5VSSIsInRvb2x0aXAiLCJEaWNlUm9sbFNjcmVlbiIsIlBsYXllckluZm8iLCJQbGF5ZXJEYXRhIiwib25Mb2FkIiwiQ2hlY2tSZWZlcmVuY2VzIiwic3RhcnQiLCJTZXROYW1lIiwiX25hbWUiLCJzdHJpbmciLCJTZXRBdmF0YXIiLCJfaW5kZXgiLCJzcHJpdGVGcmFtZSIsIlRvZ2dsZUJHSGlnaGxpZ2h0ZXIiLCJfc3RhdGUiLCJhY3RpdmUiLCJUb2dnbGVUZXh0aWdobGlnaHRlciIsIlNlZVByb2ZpbGVEYXRhIiwiSW5zdGFuY2UiLCJHZXRfTXVsdGlwbGF5ZXJDb250cm9sbGVyIiwiR2V0U2VsZWN0ZWRNb2RlIiwiR2V0X0dhbWVNYW5hZ2VyIiwiU3luY0RhdGFUb1BsYXllckdhbWVJbmZvIiwiX3RlbXBEYXRhIiwiUGxheWVyR2FtZUluZm8iLCJDYXNoIiwiTWFya2V0aW5nQW1vdW50IiwiTGF3eWVyU3RhdHVzIiwiR29sZENvdW50IiwiU3RvY2tDb3VudCIsIk5vT2ZCdXNpbmVzcyIsImxlbmd0aCIsImluZGV4Iiwibm9kZSIsImluc3RhbnRpYXRlIiwicGFyZW50IiwiZ2V0Q29tcG9uZW50IiwiQnVzaW5lc3NOYW1lIiwiU2V0VHlwZSIsIkJ1c2luZXNzVHlwZURlc2NyaXB0aW9uIiwicGFyc2VJbnQiLCJCdXNpbmVzc1R5cGUiLCJTZXRNb2RlIiwiU2V0QmFsYW5jZSIsIkFtb3VudCIsIlNldExvY2F0aW9ucyIsIkxvY2F0aW9uc05hbWUiLCJwdXNoIiwiRXhpdFByb2ZpbGVEYXRhIiwiZGVzdHJveSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxJQUFJQSxtQkFBbUIsR0FBQyxFQUF4QjtBQUNBLElBQUlDLFlBQVksR0FBQ0MsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDdEJDLEVBQUFBLElBQUksRUFBQyxjQURpQjtBQUV0QkMsRUFBQUEsVUFBVSxFQUFFO0FBQ1JDLElBQUFBLFVBQVUsRUFBRTtBQUNSLGlCQUFTLElBREQ7QUFFUkMsTUFBQUEsSUFBSSxFQUFFTCxFQUFFLENBQUNNLEtBRkQ7QUFHUkMsTUFBQUEsWUFBWSxFQUFFLElBSE47QUFJUkMsTUFBQUEsT0FBTyxFQUFDO0FBSkEsS0FESjtBQU1SQyxJQUFBQSxVQUFVLEVBQUU7QUFDUixpQkFBUyxJQUREO0FBRVJKLE1BQUFBLElBQUksRUFBRUwsRUFBRSxDQUFDTSxLQUZEO0FBR1JDLE1BQUFBLFlBQVksRUFBRSxJQUhOO0FBSVJDLE1BQUFBLE9BQU8sRUFBQztBQUpBLEtBTko7QUFXUkUsSUFBQUEscUJBQXFCLEVBQUU7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QWlEdEIsU0FBUyxDQUFDTyxZQUFWLENBQXVCRSxLQUF2QixFQUE4QmMsYUFBOUIsQ0FBNENmLE1BQTdGO0FBQ0FyRSxNQUFBQSxtQkFBbUIsQ0FBQ3FGLElBQXBCLENBQXlCZCxJQUF6QjtBQUNQO0FBRUosR0F0STZCO0FBd0k5QmUsRUFBQUEsZUF4SThCLDZCQXlJOUI7QUFDSSxTQUFLLElBQUloQixLQUFLLEdBQUcsQ0FBakIsRUFBb0JBLEtBQUssR0FBR3RFLG1CQUFtQixDQUFDcUUsTUFBaEQsRUFBd0RDLEtBQUssRUFBN0QsRUFBaUU7QUFDN0R0RSxNQUFBQSxtQkFBbUIsQ0FBQ3NFLEtBQUQsQ0FBbkIsQ0FBMkJpQixPQUEzQjtBQUNIOztBQUNEdkYsSUFBQUEsbUJBQW1CLEdBQUMsRUFBcEI7QUFFQSxTQUFLb0MsZ0JBQUwsQ0FBc0JpQixNQUF0QixHQUE2QixLQUE3QjtBQUNIO0FBaEo2QixDQUFULENBQXpCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJcclxudmFyIGJ1c2luZXNzRGV0YWlsTm9kZXM9W107XHJcbnZhciBQbGF5ZXJJbmZvVUk9Y2MuQ2xhc3Moe1xyXG4gICAgbmFtZTpcIlBsYXllckluZm9VSVwiLFxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIFBsYXllck5hbWU6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2xUaXA6XCJSZWZlcmVuY2Ugb2YgdGhlIHBsYXllciBuYW1lIGxhYmVsIG9mIGluZm8gcGxheWVyIFVJXCJ9LFxyXG4gICAgICAgIFBsYXllckNhc2g6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2xUaXA6XCJSZWZlcmVuY2Ugb2YgdGhlIHBsYXllciBjYXNoIGxhYmVsIG9mIGluZm8gcGxheWVyIFVJXCJ9LFxyXG4gICAgICAgIFBsYXllck1hcmtldGluZ0Ftb3VudDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5MYWJlbCwgXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgdG9vbFRpcDpcIlJlZmVyZW5jZSBvZiB0aGUgcGxheWVyIG1hcmtldGluZyBhbW91bnQgbGFiZWwgb2YgaW5mbyBwbGF5ZXIgVUlcIn0sXHJcbiAgICAgICAgTGF3eWVyTGFiZWw6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2xUaXA6XCJSZWZlcmVuY2Ugb2YgdGhlIHBsYXllciBsYXd5ZXIgc3RhdHVzIGxhYmVsIG9mIGluZm8gcGxheWVyIFVJXCJ9LFxyXG4gICAgICAgIEdvbGRCYWxhbmNlTGFiZWw6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2xUaXA6XCJSZWZlcmVuY2Ugb2YgdGhlIHBsYXllciBnb2xkIGJhbGFuY2UgbGFiZWwgb2YgaW5mbyBwbGF5ZXIgVUlcIn0sXHJcbiAgICAgICAgU3RvY2tCYWxhbmNlTGFiZWw6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2xUaXA6XCJSZWZlcmVuY2Ugb2YgdGhlIHBsYXllciBzdG9jayBiYWxhbmNlIGxhYmVsIG9mIGluZm8gcGxheWVyIFVJXCJ9LFxyXG4gICAgICAgIFBhcnRuZXJzaGlwU3RhdHVzTGFiZWw6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2xUaXA6XCJSZWZlcmVuY2Ugb2YgdGhlIHBsYXllciBwYXJ0bmVyc2hpcCBzdGF0dXMgbGFiZWwgb2YgaW5mbyBwbGF5ZXIgVUlcIn0sXHJcbiAgICAgICAgQnVzaW5lc3NOdW1iZXJMYWJlbDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5MYWJlbCwgXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgdG9vbFRpcDpcIlJlZmVyZW5jZSBvZiB0aGUgcGxheWVyIGJ1c2luZXNzIG51bWJlciBsYWJlbCBvZiBpbmZvIHBsYXllciBVSVwifSxcclxuICAgICAgICBCdXNpbmVzc0RldGFpbENvbnRlbnQ6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZSwgXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgdG9vbFRpcDpcIlJlZmVyZW5jZSBvZiB0aGUgY29udGVudCBvZiBzY3JvbGwgdmlldyBvZiBidXNpbmVzcyBkZXRhaWwgbm9kZSBvZiBpbmZvIHBsYXllciBVSVwifSxcclxuICAgICAgICBCdXNpbmVzc0RldGFpbFByZWZhYjoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5QcmVmYWIsIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2xUaXA6XCJSZWZlcmVuY2Ugb2YgdGhlIGJ1c2luZXNzIGRldGFpbCBwcmVmYWIgb2YgaW5mbyBwbGF5ZXIgVUlcIn0sXHJcbiAgICB9LFxyXG5cclxufSk7XHJcblxyXG52YXIgR2FtZVBsYXlSZWZlcmVuY2VNYW5hZ2VyPW51bGw7XHJcbnZhciBHYW1lTWFuYWdlcj1yZXF1aXJlKCdHYW1lTWFuYWdlcicpO1xyXG52YXIgUGxheWVyUHJvZmlsZU1hbmFnZXI9Y2MuQ2xhc3Moe1xyXG4gICAgbmFtZTpcIlBsYXllclByb2ZpbGVNYW5hZ2VyXCIsXHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIEJHSGlnaGxpZ2h0OiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGUsIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2xUaXA6XCJSZWZlcmVuY2Ugb2YgdGhlIG5vZGUgb2YgcGxheWVyJ3MgQkcgaGlnaGxpZ2h0IE5vZGVcIn0sXHJcbiAgICAgICAgUGxheWVyQXZhdGFyU3ByaXRlOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLlNwcml0ZSwgXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgdG9vbFRpcDpcIlJlZmVyZW5jZSBvZiB0aGUgc3ByaXRlIG9mIHBsYXllcidzIGF2YXRhclwifSxcclxuICAgICAgICBQbGF5ZXJOYW1lTGFiZWw6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2xUaXA6XCJSZWZlcmVuY2Ugb2YgdGhlIGxhYmVsIG9mIHBsYXllcidzIG5hbWVcIn0sXHJcbiAgICAgICAgUGxheWVyVHVybkhpZ2hsaWdodGVyTm9kZToge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlLCBcclxuICAgICAgICAgICAgc2VyaWFsaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB0b29sVGlwOlwiUmVmZXJlbmNlIG9mIHRoZSBub2RlIG9mIHBsYXllcidzIGhpZ2hsaWdodGVyXCJ9LFxyXG4gICAgICAgIEF2YXRhclNwcml0ZUZyYW1lczoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogW2NjLlNwcml0ZUZyYW1lXSwgXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgdG9vbFRpcDpcIlJlZmVyZW5jZSBvZiB0aGUgYXJyYXkgb2Ygc3ByaXRlcyBvZiBwbGF5ZXIncyBhdmF0YXJcIn0sXHJcbiAgICAgICAgUGxheWVySW5kZXg6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogLTEsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLmludGVnZXIsIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWV9LFxyXG4gICAgICAgIFBsYXllckluZm9TY3JlZW46IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZSwgXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZTogdHJ1ZX0sXHJcbiAgICAgICAgIFBsYXllckluZm9NYWluVUk6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCwgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHR5cGU6IFBsYXllckluZm9VSSxcclxuICAgICAgICAgICAgc2VyaWFsaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB0b29sdGlwOiBcImFsbCBwbGF5ZXIncyBVSSBkYXRhXCJ9LFxyXG4gICAgICAgIERpY2VSb2xsU2NyZWVuOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWV9LFxyXG4gICAgICAgIFBsYXllckluZm86IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCwgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHR5cGU6IEdhbWVNYW5hZ2VyLlBsYXllckRhdGEsXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgdG9vbHRpcDogXCJhbGwgcGxheWVyJ3MgZGF0YVwifSxcclxuICAgIH0sXHJcblxyXG4gICAgb25Mb2FkICgpIHtcclxuICAgICAgICB0aGlzLkNoZWNrUmVmZXJlbmNlcygpO1xyXG4gICAgfSxcclxuICAgIC8vXHJcblxyXG4gICAgc3RhcnQgKCkge1xyXG4gICAgfSxcclxuXHJcbiAgICBDaGVja1JlZmVyZW5jZXMoKVxyXG4gICAgIHtcclxuICAgICAgICBpZighR2FtZVBsYXlSZWZlcmVuY2VNYW5hZ2VyIHx8IEdhbWVQbGF5UmVmZXJlbmNlTWFuYWdlcj09bnVsbClcclxuICAgICAgICBHYW1lUGxheVJlZmVyZW5jZU1hbmFnZXI9cmVxdWlyZSgnR2FtZVBsYXlSZWZlcmVuY2VNYW5hZ2VyJyk7XHJcbiAgICAgfSxcclxuXHJcbiAgICBTZXROYW1lKF9uYW1lKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuUGxheWVyTmFtZUxhYmVsLnN0cmluZz1fbmFtZTtcclxuICAgIH0sXHJcblxyXG4gICAgU2V0QXZhdGFyKF9pbmRleClcclxuICAgIHtcclxuICAgICAgICB0aGlzLlBsYXllckF2YXRhclNwcml0ZS5zcHJpdGVGcmFtZT10aGlzLkF2YXRhclNwcml0ZUZyYW1lc1tfaW5kZXhdO1xyXG4gICAgfSxcclxuXHJcbiAgICBUb2dnbGVCR0hpZ2hsaWdodGVyKF9zdGF0ZSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLkJHSGlnaGxpZ2h0LmFjdGl2ZT1fc3RhdGU7XHJcbiAgICB9LFxyXG5cclxuICAgIFRvZ2dsZVRleHRpZ2hsaWdodGVyKF9zdGF0ZSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLlBsYXllclR1cm5IaWdobGlnaHRlck5vZGUuYWN0aXZlPV9zdGF0ZTtcclxuICAgIH0sXHJcblxyXG4gICAgU2VlUHJvZmlsZURhdGEoKVxyXG4gICAge1xyXG4gICAgICAgIGlmIChHYW1lUGxheVJlZmVyZW5jZU1hbmFnZXIuSW5zdGFuY2UuR2V0X011bHRpcGxheWVyQ29udHJvbGxlcigpLkdldFNlbGVjdGVkTW9kZSgpID09IDIpIHsgLy9vbmx5IGZvciByZWFsIHBsYXllcnNcclxuICAgICAgICAgICAgR2FtZVBsYXlSZWZlcmVuY2VNYW5hZ2VyLkluc3RhbmNlLkdldF9HYW1lTWFuYWdlcigpLlN5bmNEYXRhVG9QbGF5ZXJHYW1lSW5mbygwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuUGxheWVySW5mb1NjcmVlbi5hY3RpdmU9dHJ1ZTtcclxuICAgICAgICB0aGlzLkNoZWNrUmVmZXJlbmNlcygpO1xyXG4gICAgICAgIGJ1c2luZXNzRGV0YWlsTm9kZXM9W107XHJcbiAgICAgICAgdmFyIF90ZW1wRGF0YT1HYW1lUGxheVJlZmVyZW5jZU1hbmFnZXIuSW5zdGFuY2UuR2V0X0dhbWVNYW5hZ2VyKCkuUGxheWVyR2FtZUluZm9bdGhpcy5QbGF5ZXJJbmRleF07XHJcblxyXG4gICAgICAgIHRoaXMuUGxheWVySW5mb01haW5VSS5QbGF5ZXJOYW1lLnN0cmluZz1fdGVtcERhdGEuUGxheWVyTmFtZTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLlBsYXllckluZm9NYWluVUkuUGxheWVyQ2FzaC5zdHJpbmc9X3RlbXBEYXRhLkNhc2g7XHJcbiAgICAgICAgdGhpcy5QbGF5ZXJJbmZvTWFpblVJLlBsYXllck1hcmtldGluZ0Ftb3VudC5zdHJpbmc9X3RlbXBEYXRhLk1hcmtldGluZ0Ftb3VudDtcclxuICAgICAgICBcclxuICAgICAgICBpZihfdGVtcERhdGEuTGF3eWVyU3RhdHVzKVxyXG4gICAgICAgICAgICB0aGlzLlBsYXllckluZm9NYWluVUkuTGF3eWVyTGFiZWwuc3RyaW5nPVwiWUVTXCI7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLlBsYXllckluZm9NYWluVUkuTGF3eWVyTGFiZWwuc3RyaW5nPVwiTk9cIjtcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgdGhpcy5QbGF5ZXJJbmZvTWFpblVJLlBhcnRuZXJzaGlwU3RhdHVzTGFiZWwuc3RyaW5nPVwiTi9BXCI7XHJcbiAgICAgICAgdGhpcy5QbGF5ZXJJbmZvTWFpblVJLkdvbGRCYWxhbmNlTGFiZWwuc3RyaW5nPV90ZW1wRGF0YS5Hb2xkQ291bnQ7XHJcbiAgICAgICAgdGhpcy5QbGF5ZXJJbmZvTWFpblVJLlN0b2NrQmFsYW5jZUxhYmVsLnN0cmluZz1fdGVtcERhdGEuU3RvY2tDb3VudDtcclxuICAgICAgICAvL3RoaXMuUGxheWVySW5mb01haW5VSS5TdG9ja0JhbGFuY2VMYWJlbC5zdHJpbmc9X3RlbXBEYXRhLk5vT2ZTdG9ja3MubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMuUGxheWVySW5mb01haW5VSS5CdXNpbmVzc051bWJlckxhYmVsLnN0cmluZz1cIk5vIG9mIEJ1c2luZXNzZXMgOiBcIitfdGVtcERhdGEuTm9PZkJ1c2luZXNzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IF90ZW1wRGF0YS5Ob09mQnVzaW5lc3MubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGNjLmluc3RhbnRpYXRlKHRoaXMuUGxheWVySW5mb01haW5VSS5CdXNpbmVzc0RldGFpbFByZWZhYik7XHJcbiAgICAgICAgICAgICAgICBub2RlLnBhcmVudCA9IHRoaXMuUGxheWVySW5mb01haW5VSS5CdXNpbmVzc0RldGFpbENvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBub2RlLmdldENvbXBvbmVudCgnQnVzaW5lc3NEZXRhaWwnKS5TZXROYW1lKF90ZW1wRGF0YS5Ob09mQnVzaW5lc3NbaW5kZXhdLkJ1c2luZXNzTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBub2RlLmdldENvbXBvbmVudCgnQnVzaW5lc3NEZXRhaWwnKS5TZXRUeXBlKF90ZW1wRGF0YS5Ob09mQnVzaW5lc3NbaW5kZXhdLkJ1c2luZXNzVHlwZURlc2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgIG5vZGUuZ2V0Q29tcG9uZW50KCdCdXNpbmVzc0RldGFpbCcpLlNldFR5cGUoX3RlbXBEYXRhLk5vT2ZCdXNpbmVzc1tpbmRleF0uQnVzaW5lc3NUeXBlRGVzY3JpcHRpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKHBhcnNlSW50KF90ZW1wRGF0YS5Ob09mQnVzaW5lc3NbaW5kZXhdLkJ1c2luZXNzVHlwZSk9PTEpXHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5nZXRDb21wb25lbnQoJ0J1c2luZXNzRGV0YWlsJykuU2V0TW9kZShcIkhvbWUgQmFzZWRcIik7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKHBhcnNlSW50KF90ZW1wRGF0YS5Ob09mQnVzaW5lc3NbaW5kZXhdLkJ1c2luZXNzVHlwZSk9PTIpXHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5nZXRDb21wb25lbnQoJ0J1c2luZXNzRGV0YWlsJykuU2V0TW9kZShcIkJyaWNrICYgTW9ydGFyXCIpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBub2RlLmdldENvbXBvbmVudCgnQnVzaW5lc3NEZXRhaWwnKS5TZXRCYWxhbmNlKF90ZW1wRGF0YS5Ob09mQnVzaW5lc3NbaW5kZXhdLkFtb3VudCk7XHJcbiAgICAgICAgICAgICAgICBub2RlLmdldENvbXBvbmVudCgnQnVzaW5lc3NEZXRhaWwnKS5TZXRMb2NhdGlvbnMoX3RlbXBEYXRhLk5vT2ZCdXNpbmVzc1tpbmRleF0uTG9jYXRpb25zTmFtZS5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgYnVzaW5lc3NEZXRhaWxOb2Rlcy5wdXNoKG5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH0sXHJcblxyXG4gICAgRXhpdFByb2ZpbGVEYXRhKClcclxuICAgIHtcclxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYnVzaW5lc3NEZXRhaWxOb2Rlcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgYnVzaW5lc3NEZXRhaWxOb2Rlc1tpbmRleF0uZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBidXNpbmVzc0RldGFpbE5vZGVzPVtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuUGxheWVySW5mb1NjcmVlbi5hY3RpdmU9ZmFsc2U7XHJcbiAgICB9LFxyXG59KTtcclxuIl19