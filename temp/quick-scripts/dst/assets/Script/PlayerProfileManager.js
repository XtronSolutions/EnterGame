
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/PlayerProfileManager.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5bf9bM1le5IzIRIaU5nMgXr', 'PlayerProfileManager');
// Script/PlayerProfileManager.js

"use strict";

var businessDetailNodes = [];
var PlayerInfoUI = cc.Class({
  name: "PlayerInfoUI",
  properties: {
    PlayerName: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player name label of info player UI"
    },
    PlayerCash: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player cash label of info player UI"
    },
    PlayerMarketingAmount: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player marketing amount label of info player UI"
    },
    LawyerLabel: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player lawyer status label of info player UI"
    },
    GoldBalanceLabel: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player gold balance label of info player UI"
    },
    StockBalanceLabel: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player stock balance label of info player UI"
    },
    PartnershipStatusLabel: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player partnership status label of info player UI"
    },
    BusinessNumberLabel: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the player business number label of info player UI"
    },
    BusinessDetailContent: {
      "default": null,
      type: cc.Node,
      serializable: true,
      toolTip: "Reference of the content of scroll view of business detail node of info player UI"
    },
    BusinessDetailPrefab: {
      "default": null,
      type: cc.Prefab,
      serializable: true,
      toolTip: "Reference of the business detail prefab of info player UI"
    }
  }
});
var GamePlayReferenceManager = null;

var GameManager = require('GameManager');

var PlayerProfileManager = cc.Class({
  name: "PlayerProfileManager",
  "extends": cc.Component,
  properties: {
    BGHighlight: {
      "default": null,
      type: cc.Node,
      serializable: true,
      toolTip: "Reference of the node of player's BG highlight Node"
    },
    PlayerAvatarSprite: {
      "default": null,
      type: cc.Sprite,
      serializable: true,
      toolTip: "Reference of the sprite of player's avatar"
    },
    PlayerNameLabel: {
      "default": null,
      type: cc.Label,
      serializable: true,
      toolTip: "Reference of the label of player's name"
    },
    PlayerTurnHighlighterNode: {
      "default": null,
      type: cc.Node,
      serializable: true,
      toolTip: "Reference of the node of player's highlighter"
    },
    AvatarSpriteFrames: {
      "default": [],
      type: [cc.SpriteFrame],
      serializable: true,
      toolTip: "Reference of the array of sprites of player's avatar"
    },
    PlayerIndex: {
      "default": -1,
      type: cc.integer,
      serializable: true
    },
    PlayerInfoScreen: {
      "default": null,
      type: cc.Node,
      serializable: true
    },
    PlayerInfoMainUI: {
      "default": null,
      type: PlayerInfoUI,
      serializable: true,
      tooltip: "all player's UI data"
    },
    PlayerInfo: {
      "default": null,
      type: GameManager.PlayerData,
      serializable: true,
      tooltip: "all player's data"
    }
  },
  onLoad: function onLoad() {
    this.CheckReferences();
  },
  //
  start: function start() {},
  CheckReferences: function CheckReferences() {
    if (!GamePlayReferenceManager || GamePlayReferenceManager == null) GamePlayReferenceManager = require('GamePlayReferenceManager');
  },
  SetName: function SetName(_name) {
    this.PlayerNameLabel.string = _name;
  },
  SetAvatar: function SetAvatar(_index) {
    this.PlayerAvatarSprite.spriteFrame = this.AvatarSpriteFrames[_index];
  },
  ToggleBGHighlighter: function ToggleBGHighlighter(_state) {
    this.BGHighlight.active = _state;
  },
  ToggleTextighlighter: function ToggleTextighlighter(_state) {
    this.PlayerTurnHighlighterNode.active = _state;
  },
  SeeProfileData: function SeeProfileData() {
    this.PlayerInfoScreen.active = true;
    this.CheckReferences();
    businessDetailNodes = [];
    var _tempData = GamePlayReferenceManager.Instance.Get_GameManager().PlayerGameInfo[this.PlayerIndex];
    this.PlayerInfoMainUI.PlayerName.string = _tempData.PlayerName;
    this.PlayerInfoMainUI.PlayerCash.string = _tempData.Cash;
    this.PlayerInfoMainUI.PlayerMarketingAmount.string = _tempData.MarketingAmount;
    if (_tempData.LawyerStatus) this.PlayerInfoMainUI.LawyerLabel.string = "YES";else this.PlayerInfoMainUI.LawyerLabel.string = "NO";
    this.PlayerInfoMainUI.PartnershipStatusLabel.string = "N/A";
    this.PlayerInfoMainUI.GoldBalanceLabel.string = _tempData.GoldCount;
    this.PlayerInfoMainUI.StockBalanceLabel.string = _tempData.StockCount; //this.PlayerInfoMainUI.StockBalanceLabel.string=_tempData.NoOfStocks.length;

    this.PlayerInfoMainUI.BusinessNumberLabel.string = "No of Businesses : " + _tempData.NoOfBusiness.length;

    for (var index = 0; index < _tempData.NoOfBusiness.length; index++) {
      var node = cc.instantiate(this.PlayerInfoMainUI.BusinessDetailPrefab);
      node.parent = this.PlayerInfoMainUI.BusinessDetailContent;
      node.getComponent('BusinessDetail').SetName(_tempData.NoOfBusiness[index].BusinessName);
      node.getComponent('BusinessDetail').SetType(_tempData.NoOfBusiness[index].BusinessTypeDescription);
      node.getComponent('BusinessDetail').SetType(_tempData.NoOfBusiness[index].BusinessTypeDescription);
      if (parseInt(_tempData.NoOfBusiness[index].BusinessType) == 1) node.getComponent('BusinessDetail').SetMode("Home Based");else if (parseInt(_tempData.NoOfBusiness[index].BusinessType) == 2) node.getComponent('BusinessDetail').SetMode("Brick & Mortar");
      node.getComponent('BusinessDetail').SetBalance(_tempData.NoOfBusiness[index].Amount);
      node.getComponent('BusinessDetail').SetLocations(_tempData.NoOfBusiness[index].LocationsName.length);
      businessDetailNodes.push(node);
    }
  },
  ExitProfileData: function ExitProfileData() {
    for (var index = 0; index < businessDetailNodes.length; index++) {
      businessDetailNodes[index].destroy();
    }

    businessDetailNodes = [];
    this.PlayerInfoScreen.active = false;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxQbGF5ZXJQcm9maWxlTWFuYWdlci5qcyJdLCJuYW1lcyI6WyJidXNpbmVzc0RldGFpbE5vZGVzIiwiUGxheWVySW5mb1VJIiwiY2MiLCJDbGFzcyIsIm5hbWUiLCJwcm9wZXJ0aWVzIiwiUGxheWVyTmFtZSIsInR5cGUiLCJMYWJlbCIsInNlcmlhbGl6YWJsZSIsInRvb2xUaXAiLCJQbGF5ZXJDYXNoIiwiUGxheWVyTWFya2V0aW5nQW1vdW50IiwiTGF3eWVyTGFiZWwiLCJHb2xkQmFsYW5jZUxhYmVsIiwiU3RvY2tCYWxhbmNlTGFiZWwiLCJQYXJ0bmVyc2hpcFN0YXR1c0xhYmVsIiwiQnVzaW5lc3NOdW1iZXJMYWJlbCIsIkJ1c2luZXNzRGV0YWlsQ29udGVudCIsIk5vZGUiLCJCdXNpbmVzc0RldGFpbFByZWZhYiIsIlByZWZhYiIsIkdhbWVQbGF5UmVmZXJlbmNlTWFuYWdlciIsIkdhbWVNYW5hZ2VyIiwicmVxdWlyZSIsIlBsYXllclByb2ZpbGVNYW5hZ2VyIiwiQ29tcG9uZW50IiwiQkdIaWdobGlnaHQiLCJQbGF5ZXJBdmF0YXJTcHJpdGUiLCJTcHJpdGUiLCJQbGF5ZXJOYW1lTGFiZWwiLCJQbGF5ZXJUdXJuSGlnaGxpZ2h0ZXJOb2RlIiwiQXZhdGFyU3ByaXRlRnJhbWVzIiwiU3ByaXRlRnJhbWUiLCJQbGF5ZXJJbmRleCIsImludGVnZXIiLCJQbGF5ZXJJbmZvU2NyZWVuIiwiUGxheWVySW5mb01haW5VSSIsInRvb2x0aXAiLCJQbGF5ZXJJbmZvIiwiUGxheWVyRGF0YSIsIm9uTG9hZCIsIkNoZWNrUmVmZXJlbmNlcyIsInN0YXJ0IiwiU2V0TmFtZSIsIl9uYW1lIiwic3RyaW5nIiwiU2V0QXZhdGFyIiwiX2luZGV4Iiwic3ByaXRlRnJhbWUiLCJUb2dnbGVCR0hpZ2hsaWdodGVyIiwiX3N0YXRlIiwiYWN0aXZlIiwiVG9nZ2xlVGV4dGlnaGxpZ2h0ZXIiLCJTZWVQcm9maWxlRGF0YSIsIl90ZW1wRGF0YSIsIkluc3RhbmNlIiwiR2V0X0dhbWVNYW5hZ2VyIiwiUGxheWVyR2FtZUluZm8iLCJDYXNoIiwiTWFya2V0aW5nQW1vdW50IiwiTGF3eWVyU3RhdHVzIiwiR29sZENvdW50IiwiU3RvY2tDb3VudCIsIk5vT2ZCdXNpbmVzcyIsImxlbmd0aCIsImluZGV4Iiwibm9kZSIsImluc3RhbnRpYXRlIiwicGFyZW50IiwiZ2V0Q29tcG9uZW50IiwiQnVzaW5lc3NOYW1lIiwiU2V0VHlwZSIsIkJ1c2luZXNzVHlwZURlc2NyaXB0aW9uIiwicGFyc2VJbnQiLCJCdXNpbmVzc1R5cGUiLCJTZXRNb2RlIiwiU2V0QmFsYW5jZSIsIkFtb3VudCIsIlNldExvY2F0aW9ucyIsIkxvY2F0aW9uc05hbWUiLCJwdXNoIiwiRXhpdFByb2ZpbGVEYXRhIiwiZGVzdHJveSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxJQUFJQSxtQkFBbUIsR0FBQyxFQUF4QjtBQUNBLElBQUlDLFlBQVksR0FBQ0MsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDdEJDLEVBQUFBLElBQUksRUFBQyxjQURpQjtBQUV0QkMsRUFBQUEsVUFBVSxFQUFFO0FBQ1JDLElBQUFBLFVBQVUsRUFBRTtBQUNSLGlCQUFTLElBREQ7QUFFUkMsTUFBQUEsSUFBSSxFQUFFTCxFQUFFLENBQUNNLEtBRkQ7QUFHUkMsTUFBQUEsWUFBWSxFQUFFLElBSE47QUFJUkMsTUFBQUEsT0FBTyxFQUFDO0FBSkEsS0FESjtBQU1SQyxJQUFBQSxVQUFVLEVBQUU7QUFDUixpQkFBUyxJQUREO0FBRVJKLE1BQUFBLElBQUksRUFBRUwsRUFBRSxDQUFDTSxLQUZEO0FBR1JDLE1BQUFBLFlBQVksRUFBRSxJQUhOO0FBSVJDLE1BQUFBLE9BQU8sRUFBQztBQUpBLEtBTko7QUFXUkUsSUFBQUEscUJBQXFCLEVBQUU7QUFDbkIsaUJBQVMsSUFEVTtBQUVuQkwsTUFBQUEsSUFBSSxFQUFFTCxFQUFFLENBQUNNLEtBRlU7QUFHbkJDLE1BQUFBLFlBQVksRUFBRSxJQUhLO0FBSW5C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TUFBdEIsR0FBNkIsS0FBN0I7QUFDSDtBQXhJNkIsQ0FBVCxDQUF6QiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbnZhciBidXNpbmVzc0RldGFpbE5vZGVzPVtdO1xyXG52YXIgUGxheWVySW5mb1VJPWNjLkNsYXNzKHtcclxuICAgIG5hbWU6XCJQbGF5ZXJJbmZvVUlcIixcclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBQbGF5ZXJOYW1lOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsLCBcclxuICAgICAgICAgICAgc2VyaWFsaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB0b29sVGlwOlwiUmVmZXJlbmNlIG9mIHRoZSBwbGF5ZXIgbmFtZSBsYWJlbCBvZiBpbmZvIHBsYXllciBVSVwifSxcclxuICAgICAgICBQbGF5ZXJDYXNoOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsLCBcclxuICAgICAgICAgICAgc2VyaWFsaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB0b29sVGlwOlwiUmVmZXJlbmNlIG9mIHRoZSBwbGF5ZXIgY2FzaCBsYWJlbCBvZiBpbmZvIHBsYXllciBVSVwifSxcclxuICAgICAgICBQbGF5ZXJNYXJrZXRpbmdBbW91bnQ6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2xUaXA6XCJSZWZlcmVuY2Ugb2YgdGhlIHBsYXllciBtYXJrZXRpbmcgYW1vdW50IGxhYmVsIG9mIGluZm8gcGxheWVyIFVJXCJ9LFxyXG4gICAgICAgIExhd3llckxhYmVsOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsLCBcclxuICAgICAgICAgICAgc2VyaWFsaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB0b29sVGlwOlwiUmVmZXJlbmNlIG9mIHRoZSBwbGF5ZXIgbGF3eWVyIHN0YXR1cyBsYWJlbCBvZiBpbmZvIHBsYXllciBVSVwifSxcclxuICAgICAgICBHb2xkQmFsYW5jZUxhYmVsOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsLCBcclxuICAgICAgICAgICAgc2VyaWFsaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB0b29sVGlwOlwiUmVmZXJlbmNlIG9mIHRoZSBwbGF5ZXIgZ29sZCBiYWxhbmNlIGxhYmVsIG9mIGluZm8gcGxheWVyIFVJXCJ9LFxyXG4gICAgICAgIFN0b2NrQmFsYW5jZUxhYmVsOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsLCBcclxuICAgICAgICAgICAgc2VyaWFsaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB0b29sVGlwOlwiUmVmZXJlbmNlIG9mIHRoZSBwbGF5ZXIgc3RvY2sgYmFsYW5jZSBsYWJlbCBvZiBpbmZvIHBsYXllciBVSVwifSxcclxuICAgICAgICBQYXJ0bmVyc2hpcFN0YXR1c0xhYmVsOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsLCBcclxuICAgICAgICAgICAgc2VyaWFsaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB0b29sVGlwOlwiUmVmZXJlbmNlIG9mIHRoZSBwbGF5ZXIgcGFydG5lcnNoaXAgc3RhdHVzIGxhYmVsIG9mIGluZm8gcGxheWVyIFVJXCJ9LFxyXG4gICAgICAgIEJ1c2luZXNzTnVtYmVyTGFiZWw6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2xUaXA6XCJSZWZlcmVuY2Ugb2YgdGhlIHBsYXllciBidXNpbmVzcyBudW1iZXIgbGFiZWwgb2YgaW5mbyBwbGF5ZXIgVUlcIn0sXHJcbiAgICAgICAgQnVzaW5lc3NEZXRhaWxDb250ZW50OiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGUsIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2xUaXA6XCJSZWZlcmVuY2Ugb2YgdGhlIGNvbnRlbnQgb2Ygc2Nyb2xsIHZpZXcgb2YgYnVzaW5lc3MgZGV0YWlsIG5vZGUgb2YgaW5mbyBwbGF5ZXIgVUlcIn0sXHJcbiAgICAgICAgQnVzaW5lc3NEZXRhaWxQcmVmYWI6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuUHJlZmFiLCBcclxuICAgICAgICAgICAgc2VyaWFsaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB0b29sVGlwOlwiUmVmZXJlbmNlIG9mIHRoZSBidXNpbmVzcyBkZXRhaWwgcHJlZmFiIG9mIGluZm8gcGxheWVyIFVJXCJ9LFxyXG4gICAgfSxcclxuXHJcbn0pO1xyXG5cclxudmFyIEdhbWVQbGF5UmVmZXJlbmNlTWFuYWdlcj1udWxsO1xyXG52YXIgR2FtZU1hbmFnZXI9cmVxdWlyZSgnR2FtZU1hbmFnZXInKTtcclxudmFyIFBsYXllclByb2ZpbGVNYW5hZ2VyPWNjLkNsYXNzKHtcclxuICAgIG5hbWU6XCJQbGF5ZXJQcm9maWxlTWFuYWdlclwiLFxyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBCR0hpZ2hsaWdodDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlLCBcclxuICAgICAgICAgICAgc2VyaWFsaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB0b29sVGlwOlwiUmVmZXJlbmNlIG9mIHRoZSBub2RlIG9mIHBsYXllcidzIEJHIGhpZ2hsaWdodCBOb2RlXCJ9LFxyXG4gICAgICAgIFBsYXllckF2YXRhclNwcml0ZToge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5TcHJpdGUsIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2xUaXA6XCJSZWZlcmVuY2Ugb2YgdGhlIHNwcml0ZSBvZiBwbGF5ZXIncyBhdmF0YXJcIn0sXHJcbiAgICAgICAgUGxheWVyTmFtZUxhYmVsOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsLCBcclxuICAgICAgICAgICAgc2VyaWFsaXphYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB0b29sVGlwOlwiUmVmZXJlbmNlIG9mIHRoZSBsYWJlbCBvZiBwbGF5ZXIncyBuYW1lXCJ9LFxyXG4gICAgICAgIFBsYXllclR1cm5IaWdobGlnaHRlck5vZGU6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZSwgXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgdG9vbFRpcDpcIlJlZmVyZW5jZSBvZiB0aGUgbm9kZSBvZiBwbGF5ZXIncyBoaWdobGlnaHRlclwifSxcclxuICAgICAgICBBdmF0YXJTcHJpdGVGcmFtZXM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogW10sXHJcbiAgICAgICAgICAgIHR5cGU6IFtjYy5TcHJpdGVGcmFtZV0sIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2xUaXA6XCJSZWZlcmVuY2Ugb2YgdGhlIGFycmF5IG9mIHNwcml0ZXMgb2YgcGxheWVyJ3MgYXZhdGFyXCJ9LFxyXG4gICAgICAgIFBsYXllckluZGV4OiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IC0xLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5pbnRlZ2VyLCBcclxuICAgICAgICAgICAgc2VyaWFsaXphYmxlOiB0cnVlfSxcclxuICAgICAgICBQbGF5ZXJJbmZvU2NyZWVuOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGUsIFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWV9LFxyXG4gICAgICAgICBQbGF5ZXJJbmZvTWFpblVJOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0eXBlOiBQbGF5ZXJJbmZvVUksXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgdG9vbHRpcDogXCJhbGwgcGxheWVyJ3MgVUkgZGF0YVwifSxcclxuICAgICAgICBQbGF5ZXJJbmZvOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0eXBlOiBHYW1lTWFuYWdlci5QbGF5ZXJEYXRhLFxyXG4gICAgICAgICAgICBzZXJpYWxpemFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2x0aXA6IFwiYWxsIHBsYXllcidzIGRhdGFcIn0sXHJcbiAgICB9LFxyXG5cclxuICAgIG9uTG9hZCAoKSB7XHJcbiAgICAgICAgdGhpcy5DaGVja1JlZmVyZW5jZXMoKTtcclxuICAgIH0sXHJcbiAgICAvL1xyXG5cclxuICAgIHN0YXJ0ICgpIHtcclxuICAgIH0sXHJcblxyXG4gICAgQ2hlY2tSZWZlcmVuY2VzKClcclxuICAgICB7XHJcbiAgICAgICAgaWYoIUdhbWVQbGF5UmVmZXJlbmNlTWFuYWdlciB8fCBHYW1lUGxheVJlZmVyZW5jZU1hbmFnZXI9PW51bGwpXHJcbiAgICAgICAgR2FtZVBsYXlSZWZlcmVuY2VNYW5hZ2VyPXJlcXVpcmUoJ0dhbWVQbGF5UmVmZXJlbmNlTWFuYWdlcicpO1xyXG4gICAgIH0sXHJcblxyXG4gICAgU2V0TmFtZShfbmFtZSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLlBsYXllck5hbWVMYWJlbC5zdHJpbmc9X25hbWU7XHJcbiAgICB9LFxyXG5cclxuICAgIFNldEF2YXRhcihfaW5kZXgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5QbGF5ZXJBdmF0YXJTcHJpdGUuc3ByaXRlRnJhbWU9dGhpcy5BdmF0YXJTcHJpdGVGcmFtZXNbX2luZGV4XTtcclxuICAgIH0sXHJcblxyXG4gICAgVG9nZ2xlQkdIaWdobGlnaHRlcihfc3RhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5CR0hpZ2hsaWdodC5hY3RpdmU9X3N0YXRlO1xyXG4gICAgfSxcclxuXHJcbiAgICBUb2dnbGVUZXh0aWdobGlnaHRlcihfc3RhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5QbGF5ZXJUdXJuSGlnaGxpZ2h0ZXJOb2RlLmFjdGl2ZT1fc3RhdGU7XHJcbiAgICB9LFxyXG5cclxuICAgIFNlZVByb2ZpbGVEYXRhKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLlBsYXllckluZm9TY3JlZW4uYWN0aXZlPXRydWU7XHJcbiAgICAgICAgdGhpcy5DaGVja1JlZmVyZW5jZXMoKTtcclxuICAgICAgICBidXNpbmVzc0RldGFpbE5vZGVzPVtdO1xyXG4gICAgICAgIHZhciBfdGVtcERhdGE9R2FtZVBsYXlSZWZlcmVuY2VNYW5hZ2VyLkluc3RhbmNlLkdldF9HYW1lTWFuYWdlcigpLlBsYXllckdhbWVJbmZvW3RoaXMuUGxheWVySW5kZXhdO1xyXG5cclxuICAgICAgICB0aGlzLlBsYXllckluZm9NYWluVUkuUGxheWVyTmFtZS5zdHJpbmc9X3RlbXBEYXRhLlBsYXllck5hbWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5QbGF5ZXJJbmZvTWFpblVJLlBsYXllckNhc2guc3RyaW5nPV90ZW1wRGF0YS5DYXNoO1xyXG4gICAgICAgIHRoaXMuUGxheWVySW5mb01haW5VSS5QbGF5ZXJNYXJrZXRpbmdBbW91bnQuc3RyaW5nPV90ZW1wRGF0YS5NYXJrZXRpbmdBbW91bnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYoX3RlbXBEYXRhLkxhd3llclN0YXR1cylcclxuICAgICAgICAgICAgdGhpcy5QbGF5ZXJJbmZvTWFpblVJLkxhd3llckxhYmVsLnN0cmluZz1cIllFU1wiO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5QbGF5ZXJJbmZvTWFpblVJLkxhd3llckxhYmVsLnN0cmluZz1cIk5PXCI7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIHRoaXMuUGxheWVySW5mb01haW5VSS5QYXJ0bmVyc2hpcFN0YXR1c0xhYmVsLnN0cmluZz1cIk4vQVwiO1xyXG4gICAgICAgIHRoaXMuUGxheWVySW5mb01haW5VSS5Hb2xkQmFsYW5jZUxhYmVsLnN0cmluZz1fdGVtcERhdGEuR29sZENvdW50O1xyXG4gICAgICAgIHRoaXMuUGxheWVySW5mb01haW5VSS5TdG9ja0JhbGFuY2VMYWJlbC5zdHJpbmc9X3RlbXBEYXRhLlN0b2NrQ291bnQ7XHJcbiAgICAgICAgLy90aGlzLlBsYXllckluZm9NYWluVUkuU3RvY2tCYWxhbmNlTGFiZWwuc3RyaW5nPV90ZW1wRGF0YS5Ob09mU3RvY2tzLmxlbmd0aDtcclxuICAgICAgICB0aGlzLlBsYXllckluZm9NYWluVUkuQnVzaW5lc3NOdW1iZXJMYWJlbC5zdHJpbmc9XCJObyBvZiBCdXNpbmVzc2VzIDogXCIrX3RlbXBEYXRhLk5vT2ZCdXNpbmVzcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBfdGVtcERhdGEuTm9PZkJ1c2luZXNzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLlBsYXllckluZm9NYWluVUkuQnVzaW5lc3NEZXRhaWxQcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5wYXJlbnQgPSB0aGlzLlBsYXllckluZm9NYWluVUkuQnVzaW5lc3NEZXRhaWxDb250ZW50O1xyXG4gICAgICAgICAgICAgICAgbm9kZS5nZXRDb21wb25lbnQoJ0J1c2luZXNzRGV0YWlsJykuU2V0TmFtZShfdGVtcERhdGEuTm9PZkJ1c2luZXNzW2luZGV4XS5CdXNpbmVzc05hbWUpO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5nZXRDb21wb25lbnQoJ0J1c2luZXNzRGV0YWlsJykuU2V0VHlwZShfdGVtcERhdGEuTm9PZkJ1c2luZXNzW2luZGV4XS5CdXNpbmVzc1R5cGVEZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICBub2RlLmdldENvbXBvbmVudCgnQnVzaW5lc3NEZXRhaWwnKS5TZXRUeXBlKF90ZW1wRGF0YS5Ob09mQnVzaW5lc3NbaW5kZXhdLkJ1c2luZXNzVHlwZURlc2NyaXB0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihwYXJzZUludChfdGVtcERhdGEuTm9PZkJ1c2luZXNzW2luZGV4XS5CdXNpbmVzc1R5cGUpPT0xKVxyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuZ2V0Q29tcG9uZW50KCdCdXNpbmVzc0RldGFpbCcpLlNldE1vZGUoXCJIb21lIEJhc2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZihwYXJzZUludChfdGVtcERhdGEuTm9PZkJ1c2luZXNzW2luZGV4XS5CdXNpbmVzc1R5cGUpPT0yKVxyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuZ2V0Q29tcG9uZW50KCdCdXNpbmVzc0RldGFpbCcpLlNldE1vZGUoXCJCcmljayAmIE1vcnRhclwiKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgbm9kZS5nZXRDb21wb25lbnQoJ0J1c2luZXNzRGV0YWlsJykuU2V0QmFsYW5jZShfdGVtcERhdGEuTm9PZkJ1c2luZXNzW2luZGV4XS5BbW91bnQpO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5nZXRDb21wb25lbnQoJ0J1c2luZXNzRGV0YWlsJykuU2V0TG9jYXRpb25zKF90ZW1wRGF0YS5Ob09mQnVzaW5lc3NbaW5kZXhdLkxvY2F0aW9uc05hbWUubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGJ1c2luZXNzRGV0YWlsTm9kZXMucHVzaChub2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIEV4aXRQcm9maWxlRGF0YSgpXHJcbiAgICB7XHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGJ1c2luZXNzRGV0YWlsTm9kZXMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGJ1c2luZXNzRGV0YWlsTm9kZXNbaW5kZXhdLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnVzaW5lc3NEZXRhaWxOb2Rlcz1bXTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLlBsYXllckluZm9TY3JlZW4uYWN0aXZlPWZhbHNlO1xyXG4gICAgfSxcclxufSk7XHJcbiJdfQ==