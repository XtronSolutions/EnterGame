{"version":3,"sources":["assets\\Script\\DiceController.js"],"names":["GamePlayReferenceManager","DiceData","cc","Class","name","properties","BGSprite","type","Sprite","serializable","DiceNodes","Node","ctor","DiceController","Component","HasOneDice","Boolean","HasTwoDices","DiceOneData","DiceTwoData","statics","Instance","CheckReferences","require","ClearAllTimeouts","clearTimeout","onEnable","ResetDice","DiceCounter","MaxCounter","getRandom","DiceSpeed","start","IterateDice","_dice","_index","index","length","active","AnimateDice","_dice1Value","_dice2Value","_displayIndex","_displayIndex2","setTimeout","Get_GameManager","DiceFuntionality","error","min","max","Math","floor","random","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var GamePlayReferenceManager=null;\r\nvar DiceData=cc.Class({\r\n    name:\"DiceData\",\r\n    properties: {\r\n        BGSprite: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n            serializable: true,\r\n        },\r\n        DiceNodes: {\r\n            default: [],\r\n            type: [cc.Node],\r\n            serializable: true,\r\n        },\r\n    },\r\n\r\n    ctor: function () {//constructor//\r\n    },\r\n});\r\nvar DiceController=cc.Class({\r\n    name:\"DiceController\",\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        HasOneDice: {\r\n            default: false,\r\n            type: cc.Boolean,\r\n            serializable: true,\r\n        },\r\n        HasTwoDices: {\r\n            default: false,\r\n            type: cc.Boolean,\r\n            serializable: true,\r\n        },\r\n        DiceOneData: {\r\n            default: {},\r\n            type: DiceData,\r\n            serializable: true,\r\n        },\r\n        DiceTwoData: {\r\n            default: {},\r\n            type: DiceData,\r\n            serializable: true,\r\n        },\r\n    },\r\n    statics: {\r\n        Instance: null,\r\n      },\r\n    \r\n\r\n    CheckReferences()\r\n    {\r\n        if(!GamePlayReferenceManager || GamePlayReferenceManager==null)\r\n        GamePlayReferenceManager=require('GamePlayReferenceManager');\r\n    },\r\n\r\n    ClearAllTimeouts()\r\n    {\r\n        clearTimeout();\r\n    },\r\n\r\n    onEnable()\r\n    {\r\n        DiceController.Instance=this;\r\n        this.CheckReferences();\r\n        this.ResetDice();\r\n        this.DiceCounter=0;\r\n        this.MaxCounter=this.getRandom(12,21);\r\n        this.DiceSpeed=150;\r\n        //this.AnimateDice(4,5);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    IterateDice(_dice,_index)\r\n    {\r\n        for (let index = 0; index < _dice.length; index++) {\r\n            if(_index==index)\r\n                _dice[index].active=true;\r\n            else\r\n                _dice[index].active=false;\r\n        }\r\n    },\r\n\r\n    AnimateDice(_dice1Value=0,_dice2Value=0)\r\n    {\r\n        try {\r\n            if(this.DiceCounter<this.MaxCounter)\r\n            {\r\n                if(this.HasOneDice)\r\n                {\r\n                    if(this.DiceOneData)\r\n                    {\r\n                        var _displayIndex=this.getRandom(0,6)\r\n                        this.IterateDice(this.DiceOneData.DiceNodes,_displayIndex);\r\n                    }\r\n                }\r\n    \r\n                if(this.HasTwoDices)\r\n                {\r\n                    if(this.DiceTwoData)\r\n                    {\r\n                        var _displayIndex2=this.getRandom(0,6)\r\n                        this.IterateDice(this.DiceTwoData.DiceNodes,_displayIndex2);\r\n                    }\r\n                }\r\n    \r\n                setTimeout(() => {\r\n                    this.DiceCounter++;\r\n                    this.AnimateDice(_dice1Value,_dice2Value);\r\n                 },this.DiceSpeed);\r\n            }\r\n            else\r\n            {\r\n                this.DiceCounter=0;\r\n                \r\n                if(this.DiceOneData && this.DiceTwoData)\r\n                {\r\n                if(this.HasOneDice)\r\n                    this.IterateDice(this.DiceOneData.DiceNodes,(_dice1Value-1));\r\n    \r\n                if(this.HasTwoDices)\r\n                    this.IterateDice(this.DiceTwoData.DiceNodes,(_dice2Value-1));\r\n                }\r\n                 \r\n               setTimeout(() => {\r\n                   if(GamePlayReferenceManager.Instance.Get_GameManager())\r\n                   {\r\n                    GamePlayReferenceManager.Instance.Get_GameManager().DiceFuntionality();\r\n                   }\r\n               }, 1000); \r\n            }   \r\n        } catch (error) {\r\n            \r\n        }\r\n       \r\n    },\r\n\r\n    getRandom:function(min,max)\r\n    {\r\n        return Math.floor(Math.random() * (max - min) ) + min; // min included and max excluded\r\n    },\r\n\r\n    ResetDice()\r\n    {\r\n        if(this.DiceOneData && this.DiceTwoData)\r\n        {\r\n        this.IterateDice(this.DiceOneData.DiceNodes,0);\r\n        this.IterateDice(this.DiceTwoData.DiceNodes,0);\r\n        }\r\n    },\r\n});\r\n\r\nmodule.exports = DiceController;\r\n"]}